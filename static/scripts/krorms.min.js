$(function(){var e={errorMessages:{min_length:"{field} must be at least {min} characters.",max_length:"{field} cannot exceed {max} characters.",both_length:"{field} must be between {min}-{max} characters.",invalid_email:"{field} must contain a valid e-mail address.",invalid_number:"{field} must contain a valid number.",invalid:"{field} must be valid."},months:["January","February","March","April","May","June","July","August","September","October","November","December"],errors:[],isFunction:function(e){return typeof e==="function"},load:function(){$(document).on("submit",".validatable",function(t){var n=$(this);var r=window[n.attr("submit")];if(r!=undefined&&e.isFunction(r))r(n);if(e.validate(n)){var i=window[n.attr("complete")];if(i!=undefined&&e.isFunction(i))i(n);if(n.hasClass("preventDefault"))t.preventDefault()}else{t.preventDefault();var s=window[n.attr("error")];if(s!=undefined&&e.isFunction(s))s(e.errors)}});$("select").each(function(){e.updateRange($(this))});window.setKrormsErrorMessage=e.setErrorMessage},updateSelectorDays:function(e){if(!e instanceof jQuery)e=$(e);var t=e.parent(),n=t.children("[type=month]").first(),r=t.children("[type=year]").first(),i=(new Date(r.val(),n.val(),0)).getDate(),s=1;e.empty();while(s<i+1){$("<option/>").val(s+1).html(s).appendTo(e);s++}},parseRangeValue:function(e){return e=="year"?(new Date).getFullYear():parseInt(e)},updateRange:function(t){if(!t instanceof jQuery)t=$(t);var n=t.attr("range");if(n!=undefined){if(n=="months"){for(var r in e.months)$("<option/>").val(parseInt(r)+1).html(e.months[r]).appendTo(t);return}if(n=="days"){var i=t.parent(),s=function(){e.updateSelectorDays(t)};i.children("[type=month]").first().on("change",s);i.children("[type=year]").first().on("change",s);setTimeout(s,1)}var o=n.split("-",2),u=e.parseRangeValue(o[0]),a=e.parseRangeValue(o[1]);var f=u;if(u>a){while(f>a-1){$("<option/>").val(f).html(f).appendTo(t);f--}}else{while(f<a+1){$("<option/>").val(f).html(f).appendTo(t);f++}}}},validate:function(t){e.errors=[];t.find("input,textarea").each(function(){var t=$(this);e.validateField(t)});return e.errors.length==0},validateField:function(t,n){var r=t.attr("minlength"),i=t.attr("maxlength"),s=t.val(),o=t.attr("name"),u=s.length;if(r!=undefined&&i!=undefined&&(u<r||u>i)){e.error(t,"both_length",{field:o,min:r,max:i})}else{if(r!=undefined&&u<r)e.error(t,"min_length",{field:o,min:r});if(i!=undefined&&u>i)e.error(t,"max_length",{field:o,max:i})}var a=t.attr("validate");if(a!=undefined){if(a=="email"){if(s.match(/^\S+@\S+\.[a-zA-Z]+$/)==null)e.error(t,"invalid_email",{field:o})}else if(a=="number"){if(s.match(/^[\d]+$/)==null)e.error(t,"invalid_number",{field:o})}else{if(s.match(new RegExp(a))==null)e.error(t,"invalid",{field:o})}}},error:function(t,n,r){e.errors.push([t,e.errorMessage(n,r)])},errorMessage:function(t,n){var r=e.errorMessages[t];for(var i in n)r=r.replace(new RegExp("{"+i+"}","g"),n[i]);return r},setErrorMessage:function(t,n){e.errorMessages[t]=n}};e.load()})